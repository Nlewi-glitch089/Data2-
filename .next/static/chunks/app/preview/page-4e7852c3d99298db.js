(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{7118:function(e,t,n){Promise.resolve().then(n.bind(n,3504))},4971:function(e,t,n){"use strict";function s(e){if(!Array.isArray(e)||0===e.length)return{columns:{},rowCount:0,columnCount:0};let t=e.length,n=Object.keys(e[0]),s=n.length,a={};return n.forEach(t=>{a[t]=function(e,t){let n=e.map(e=>e[t]),s=n.filter(e=>null!=e&&""!==e),a=n.length-s.length,u=new Set(s).size,c=function(e){if(0===e.length)return"unknown";let t=e.slice(0,Math.min(100,e.length)),n=0,s=0,a=0,u=0,c=0;t.forEach(e=>{let t=String(e).trim().toLowerCase();"true"===t||"false"===t?c++:!isNaN(parseFloat(t))&&isFinite(t)?n++:r(t)?a++:i(t)?u++:l(t)&&s++});let o=[{type:"number",count:n},{type:"boolean",count:c},{type:"email",count:a},{type:"url",count:u},{type:"date",count:s}].reduce((e,t)=>e.count>t.count?e:t);return o.count>.5*t.length?o.type:"text"}(s),o=n.length-u,h="number"===c?function(e){let t=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e));if(t.length<4)return[];t.sort((e,t)=>e-t);let n=t[Math.floor(.25*t.length)],s=t[Math.floor(.75*t.length)],r=s-n,i=n-1.5*r,l=s+1.5*r;return t.filter(e=>e<i||e>l)}(s):[],d=function(e,t){let n=[];return"email"===t?n.push(...e.filter(e=>!r(String(e).trim())).slice(0,10)):"url"===t?n.push(...e.filter(e=>!i(String(e).trim())).slice(0,10)):"date"===t?n.push(...e.filter(e=>!l(String(e).trim())).slice(0,10)):"number"===t&&n.push(...e.filter(e=>isNaN(parseFloat(String(e).trim()))).slice(0,10)),n}(s,c);return{columnName:t,totalRows:n.length,missingCount:a,missingPercent:(a/n.length*100).toFixed(2),uniqueCount:u,uniquePercent:(u/n.length*100).toFixed(2),dataType:c,duplicateCount:o,duplicatePercent:(o/n.length*100).toFixed(2),outliersCount:h.length,outliersPercent:(h.length/s.length*100).toFixed(2),outlierValues:h.slice(0,5),formatIssuesCount:d.length,formatIssuesPercent:(d.length/s.length*100).toFixed(2),examples:s.slice(0,5)}}(e,t)}),{columns:a,rowCount:t,columnCount:s,timestamp:new Date().toISOString()}}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function i(e){try{return new URL(e),!0}catch(e){return!1}}function l(e){let t=new Date(e);return t instanceof Date&&!isNaN(t)}function a(e){let t={};return Object.values(e.columns).forEach(e=>{t[e.dataType]=(t[e.dataType]||0)+1}),t}function u(e){return Object.values(e.columns).map(e=>({...e,issueCount:(e.missingCount>0?1:0)+(e.duplicateCount>0?1:0)+(e.outliersCount>0?1:0)+(e.formatIssuesCount>0?1:0)})).filter(e=>e.issueCount>0).sort((e,t)=>t.issueCount-e.issueCount)}n.d(t,{Io:function(){return a},hw:function(){return s},od:function(){return u}})},3504:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),r=n(2265),i=n(9376);function l(e){let{data:t,maxRows:n=100}=e;if(!Array.isArray(t)||0===t.length)return(0,s.jsx)("div",{className:"preview-empty",children:"No data to preview"});let r=Object.keys(t[0]),i=t.slice(0,n);return(0,s.jsxs)("div",{className:"data-preview",children:[(0,s.jsxs)("div",{className:"preview-info",children:["Showing ",i.length," of ",t.length," rows"]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{className:"preview-table",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:r.map(e=>(0,s.jsx)("th",{children:e},e))})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsx)("tr",{children:r.map(n=>(0,s.jsx)("td",{title:String(e[n]||""),children:null===e[n]||void 0===e[n]?(0,s.jsx)("span",{className:"null-value",children:"NULL"}):String(e[n]).slice(0,50)},"".concat(t,"-").concat(n)))},t))})]})})]})}var a=n(4971);function u(){let[e,t]=(0,r.useState)(null),[n,u]=(0,r.useState)(""),[c,o]=(0,r.useState)(null),[h,d]=(0,r.useState)(!0),m=(0,i.useRouter)();return((0,r.useEffect)(()=>{let e=sessionStorage.getItem("dataset"),n=sessionStorage.getItem("fileName");if(!e){m.push("/");return}try{let s=JSON.parse(e);t(s),u(n||"dataset.csv");let r=(0,a.hw)(s);o(r),sessionStorage.setItem("analysis",JSON.stringify(r))}catch(e){console.error("Error loading data:",e),m.push("/")}finally{d(!1)}},[m]),h)?(0,s.jsx)("div",{className:"preview-page",children:(0,s.jsx)("div",{className:"loading-spinner",children:"Loading data preview..."})}):(0,s.jsxs)("div",{className:"preview-page",children:[(0,s.jsxs)("section",{className:"preview-header",children:[(0,s.jsx)("h2",{children:"Data Preview"}),(0,s.jsx)("p",{className:"file-info",children:n}),(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress-fill",style:{width:"100%"}})}),(0,s.jsx)("p",{className:"progress-text",children:"Analysis Complete"})]}),e&&(0,s.jsx)(l,{data:e.slice(0,100)}),c&&(0,s.jsxs)("section",{className:"column-stats",children:[(0,s.jsx)("h3",{children:"Column Statistics"}),(0,s.jsx)("div",{className:"stats-grid",children:Object.values(c.columns).map(e=>(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h4",{children:e.columnName}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Type:"})," ",e.dataType]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Missing:"})," ",e.missingCount," (",e.missingPercent,"%)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Unique:"})," ",e.uniqueCount]})]},e.columnName))})]}),(0,s.jsx)("div",{className:"button-group",children:(0,s.jsx)("button",{className:"btn-primary",onClick:()=>m.push("/dashboard"),children:"View Dashboard â†’"})})]})}},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7118)}),_N_E=e.O()}]);