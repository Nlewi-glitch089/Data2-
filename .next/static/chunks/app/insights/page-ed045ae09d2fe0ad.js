(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{2102:function(s,e,n){Promise.resolve().then(n.bind(n,1133))},1133:function(s,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var i=n(7437),t=n(2265),a=n(9376),l=n(6867);function r(s){let{columnAnalysis:e,columnInsights:n}=s,[a,r]=(0,t.useState)(!1),c=(0,l.V)(e);return(0,i.jsxs)("div",{className:"column-details",children:[(0,i.jsxs)("button",{className:"column-header",onClick:()=>r(!a),"aria-expanded":a,children:[(0,i.jsx)("span",{className:"column-name",children:e.columnName}),(0,i.jsx)("span",{className:"column-type",children:e.dataType}),(0,i.jsxs)("span",{className:"column-issues",children:[e.missingCount+e.duplicateCount+e.outliersCount," issues"]}),(0,i.jsx)("span",{className:"toggle-icon",children:a?"▼":"▶"})]}),a&&(0,i.jsxs)("div",{className:"column-content",children:[(0,i.jsxs)("div",{className:"stat-grid",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Missing Values"}),(0,i.jsxs)("span",{children:[e.missingCount," (",e.missingPercent,"%)"]})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Duplicates"}),(0,i.jsxs)("span",{children:[e.duplicateCount," (",e.duplicatePercent,"%)"]})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Outliers"}),(0,i.jsxs)("span",{children:[e.outliersCount," (",e.outliersPercent,"%)"]})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("label",{children:"Unique Values"}),(0,i.jsxs)("span",{children:[e.uniqueCount," (",e.uniquePercent,"%)"]})]})]}),n&&(0,i.jsxs)("div",{className:"insights",children:[(0,i.jsx)("h5",{children:"Analysis:"}),(0,i.jsx)("p",{children:n.missingIssue}),(0,i.jsx)("p",{children:n.duplicateIssue}),(0,i.jsx)("p",{children:n.outlierIssue}),(0,i.jsx)("p",{children:n.formatIssue})]}),c.length>0&&(0,i.jsxs)("div",{className:"recommendations",children:[(0,i.jsx)("h5",{children:"Recommendations:"}),c.map((s,e)=>(0,i.jsxs)("div",{className:"rec-item",children:[(0,i.jsx)("strong",{children:s.message}),(0,i.jsx)("ul",{children:s.actions.map((s,e)=>(0,i.jsx)("li",{children:s},e))})]},e))]})]})]})}function c(){let[s,e]=(0,t.useState)(null),[n,c]=(0,t.useState)(null),[o,u]=(0,t.useState)(null),[d,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(!0),g=(0,a.useRouter)();return((0,t.useEffect)(()=>{let s=sessionStorage.getItem("analysis"),n=sessionStorage.getItem("metrics"),i=sessionStorage.getItem("fileName");if(!s){g.push("/");return}try{let t=JSON.parse(s),a=JSON.parse(n);e(t),c(a),m(i||"dataset"),(0,l.y)(t,a,i).then(u)}catch(s){console.error("Error loading insights:",s),g.push("/")}finally{p(!1)}},[g]),h)?(0,i.jsx)("div",{className:"insights-page",children:(0,i.jsx)("div",{className:"loading",children:"Loading detailed insights..."})}):(0,i.jsxs)("div",{className:"insights-page",children:[(0,i.jsxs)("section",{className:"insights-header",children:[(0,i.jsx)("h2",{children:"Detailed Column Analysis"}),(0,i.jsx)("p",{children:d})]}),s&&(0,i.jsx)("div",{className:"columns-accordion",children:Object.values(s.columns).map(s=>{var e;return(0,i.jsx)(r,{columnAnalysis:s,columnInsights:null==o?void 0:null===(e=o.columnInsights)||void 0===e?void 0:e[s.columnName]},s.columnName)})}),(0,i.jsx)("div",{className:"button-group",children:(0,i.jsx)("button",{className:"btn-primary",onClick:()=>g.push("/"),children:"Upload New Dataset"})})]})}},6867:function(s,e,n){"use strict";async function i(s,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dataset";try{let i=await fetch("/api/insights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysis:s,metrics:e,fileName:n})});if(!i.ok){let s=await i.json();throw Error(s.error||"Failed to generate insights")}return await i.json()}catch(s){return console.error("AI insights error:",s),{summary:"Error generating insights: ".concat(s.message),recommendations:[],columnInsights:{},error:s.message}}}function t(s){let e=[];return s.missingCount>0&&e.push({type:"missing",message:"Handle ".concat(s.missingCount," missing values"),actions:["Remove rows with missing data","Impute with average (for numeric) or mode",'Mark as "unknown"']}),s.duplicateCount>0&&e.push({type:"duplicates",message:"Address ".concat(s.duplicateCount," duplicate values"),actions:["Remove exact duplicates","Normalize values (trim, lowercase)",'Consolidate variants (e.g., "USA" vs "US")']}),s.outliersCount>0&&e.push({type:"outliers",message:"Review ".concat(s.outliersCount," potential outliers"),actions:["Validate against business rules","Remove if erroneous","Keep if legitimate"]}),s.formatIssuesCount>0&&e.push({type:"format",message:"Fix ".concat(s.formatIssuesCount," format inconsistencies"),actions:["Standardize formatting","Use regex validation","Apply consistent parsing rules"]}),e}n.d(e,{V:function(){return t},y:function(){return i}})},9376:function(s,e,n){"use strict";var i=n(5475);n.o(i,"useRouter")&&n.d(e,{useRouter:function(){return i.useRouter}})}},function(s){s.O(0,[971,117,744],function(){return s(s.s=2102)}),_N_E=s.O()}]);