(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7655:function(e,t,s){Promise.resolve().then(s.bind(s,5258))},5258:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(7437),r=s(2265),i=s(9376);function a(e){var t;let{metrics:s}=e;if(!s)return(0,n.jsx)("div",{children:"Loading metrics..."});let r=(t=s.compositeScore)>=90?"#10b981":t>=70?"#f59e0b":t>=50?"#f97316":"#ef4444";return(0,n.jsxs)("div",{className:"quality-score-container",children:[(0,n.jsxs)("div",{className:"score-display",style:{borderColor:r},children:[(0,n.jsx)("div",{className:"score-number",style:{color:r},children:s.compositeScore}),(0,n.jsx)("div",{className:"score-level",style:{color:r},children:s.scoreLevel}),(0,n.jsx)("div",{className:"score-summary",children:s.summary})]}),(0,n.jsxs)("div",{className:"metrics-breakdown",children:[(0,n.jsxs)("div",{className:"metric-item",children:[(0,n.jsx)("span",{className:"metric-label",children:"Completeness"}),(0,n.jsx)("div",{className:"metric-bar",children:(0,n.jsx)("div",{className:"metric-fill",style:{width:"".concat(s.completeness,"%"),backgroundColor:"#3b82f6"}})}),(0,n.jsxs)("span",{className:"metric-value",children:[s.completeness,"%"]})]}),(0,n.jsxs)("div",{className:"metric-item",children:[(0,n.jsx)("span",{className:"metric-label",children:"Consistency"}),(0,n.jsx)("div",{className:"metric-bar",children:(0,n.jsx)("div",{className:"metric-fill",style:{width:"".concat(s.consistency,"%"),backgroundColor:"#10b981"}})}),(0,n.jsxs)("span",{className:"metric-value",children:[s.consistency,"%"]})]}),(0,n.jsxs)("div",{className:"metric-item",children:[(0,n.jsx)("span",{className:"metric-label",children:"Accuracy"}),(0,n.jsx)("div",{className:"metric-bar",children:(0,n.jsx)("div",{className:"metric-fill",style:{width:"".concat(s.accuracy,"%"),backgroundColor:"#f59e0b"}})}),(0,n.jsxs)("span",{className:"metric-value",children:[s.accuracy,"%"]})]})]})]})}var l=s(5678),c=s(4971);function o(e){let{metrics:t}=e,s=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!s.current||!t)return;let e=s.current.getContext("2d"),n=[{label:"Completeness",value:t.completeness,color:"#3b82f6"},{label:"Consistency",value:t.consistency,color:"#10b981"},{label:"Accuracy",value:t.accuracy,color:"#f59e0b"}];return i.current&&i.current.destroy(),i.current=new l.ZP(e,{type:"bar",data:{labels:n.map(e=>e.label),datasets:[{label:"Quality Score (%)",data:n.map(e=>e.value),backgroundColor:n.map(e=>e.color),borderRadius:6,borderSkipped:!1}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Quality Metrics"}},scales:{x:{min:0,max:100}}}}),()=>{i.current&&i.current.destroy()}},[t]),(0,n.jsx)("div",{className:"chart-wrapper",children:(0,n.jsx)("canvas",{ref:s})})}function u(e){let{analysis:t}=e,s=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!s.current||!t)return;let e=s.current.getContext("2d"),n=(0,c.Io)(t),r=Object.keys(n),a=Object.values(n);return i.current&&i.current.destroy(),i.current=new l.ZP(e,{type:"doughnut",data:{labels:r,datasets:[{data:a,backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Data Types Distribution"}}}}),()=>{i.current&&i.current.destroy()}},[t]),(0,n.jsx)("div",{className:"chart-wrapper",children:(0,n.jsx)("canvas",{ref:s})})}function d(e){let{columnIssues:t}=e,s=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!s.current||!t||0===t.length)return;let e=s.current.getContext("2d"),n=t.slice(0,10);return i.current&&i.current.destroy(),i.current=new l.ZP(e,{type:"bar",data:{labels:n.map(e=>e.columnName),datasets:[{label:"Issue Count",data:n.map(e=>e.issueCount),backgroundColor:"#ef4444",borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Top 10 Columns with Issues"}}}}),()=>{i.current&&i.current.destroy()}},[t]),(0,n.jsx)("div",{className:"chart-wrapper",children:(0,n.jsx)("canvas",{ref:s})})}var m=s(6867);function h(e){let{analysis:t,metrics:s,fileName:i}=e,[a,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[u,d]=(0,r.useState)("");return((0,r.useEffect)(()=>{async function e(){try{o(!0);let e=await (0,m.y)(t,s,i);l(e)}catch(e){d(e.message)}finally{o(!1)}}t&&s&&e()},[t,s,i]),c)?(0,n.jsx)("div",{className:"ai-insights-loading",children:"\uD83E\uDD16 Generating AI insights..."}):u||(null==a?void 0:a.error)?(0,n.jsxs)("div",{className:"ai-insights-error",children:["⚠️ ",u||a.error,(0,n.jsx)("p",{className:"small",children:"AI insights temporarily unavailable"})]}):(0,n.jsxs)("div",{className:"ai-insights-panel",children:[(0,n.jsx)("h3",{children:"✨ AI-Powered Insights"}),(0,n.jsx)("div",{className:"ai-summary",children:null==a?void 0:a.summary}),(null==a?void 0:a.recommendations)&&a.recommendations.length>0&&(0,n.jsxs)("div",{className:"ai-recommendations",children:[(0,n.jsx)("h4",{children:"Top Recommendations:"}),(0,n.jsx)("ul",{children:a.recommendations.slice(0,5).map((e,t)=>(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:e.title}),": ",e.description,(0,n.jsx)("div",{className:"impact-badge",children:e.impact})]},t))})]})]})}function p(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)(""),[x,y]=(0,r.useState)(!0),j=(0,i.useRouter)();return((0,r.useEffect)(()=>{let e=sessionStorage.getItem("analysis"),s=sessionStorage.getItem("fileName");if(!e){j.push("/");return}try{let n=JSON.parse(e);t(n),g(s||"dataset");let r=function(e){let{columns:t,rowCount:s,columnCount:n}=e,r=0===s||0===n?100:100-Object.values(t).reduce((e,t)=>e+t.missingCount,0)/(s*n)*100,i=function(e){let t=Object.values(e).map(e=>(e.totalRows-e.missingCount-e.formatIssuesCount)/e.totalRows*100);return t.length>0?t.reduce((e,t)=>e+t,0)/t.length:100}(t),a=function(e){let t=Object.values(e).map(e=>{let t=e.outliersCount+e.formatIssuesCount;return(e.totalRows-t)/e.totalRows*100});return t.length>0?t.reduce((e,t)=>e+t,0)/t.length:100}(t),l=Math.round((r+i+a)/3);return{completeness:Math.round(r),consistency:Math.round(i),accuracy:Math.round(a),compositeScore:l,scoreLevel:l>=90?"Excellent":l>=70?"Good":l>=50?"Fair":"Poor",summary:l>=90?"Dataset is in excellent condition with minimal quality issues.":l>=70?"Dataset is in good condition with some quality issues to address.":l>=50?"Dataset has fair quality with several issues that should be fixed.":"Dataset has significant quality issues that require attention."}}(n);l(r),sessionStorage.setItem("metrics",JSON.stringify(r));let i=(0,c.od)(n);p(i)}catch(e){console.error("Error loading analysis:",e),j.push("/")}finally{y(!1)}},[j]),x)?(0,n.jsx)("div",{className:"dashboard-page",children:(0,n.jsx)("div",{className:"loading",children:"Loading dashboard..."})}):(0,n.jsxs)("div",{className:"dashboard-page",children:[(0,n.jsxs)("section",{className:"dashboard-header",children:[(0,n.jsx)("h2",{children:"Quality Analysis Dashboard"}),(0,n.jsx)("p",{children:f})]}),s&&(0,n.jsx)(a,{metrics:s}),(0,n.jsxs)("div",{className:"charts-grid",children:[s&&(0,n.jsx)(o,{metrics:s}),e&&(0,n.jsx)(u,{analysis:e}),m.length>0&&(0,n.jsx)(d,{columnIssues:m})]}),e&&s&&(0,n.jsx)(h,{analysis:e,metrics:s,fileName:f}),m.length>0&&(0,n.jsxs)("section",{className:"column-issues-table",children:[(0,n.jsx)("h3",{children:"Columns with Issues"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Column"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{children:"Missing"}),(0,n.jsx)("th",{children:"Duplicates"}),(0,n.jsx)("th",{children:"Outliers"})]})}),(0,n.jsx)("tbody",{children:m.slice(0,10).map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.columnName}),(0,n.jsx)("td",{children:e.dataType}),(0,n.jsx)("td",{children:e.missingCount}),(0,n.jsx)("td",{children:e.duplicateCount}),(0,n.jsx)("td",{children:e.outliersCount})]},e.columnName))})]})]}),(0,n.jsx)("div",{className:"button-group",children:(0,n.jsx)("button",{className:"btn-primary",onClick:()=>j.push("/insights"),children:"View Detailed Insights →"})})]})}},6867:function(e,t,s){"use strict";async function n(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dataset";try{let n=await fetch("/api/insights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysis:e,metrics:t,fileName:s})});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to generate insights")}return await n.json()}catch(e){return console.error("AI insights error:",e),{summary:"Error generating insights: ".concat(e.message),recommendations:[],columnInsights:{},error:e.message}}}function r(e){let t=[];return e.missingCount>0&&t.push({type:"missing",message:"Handle ".concat(e.missingCount," missing values"),actions:["Remove rows with missing data","Impute with average (for numeric) or mode",'Mark as "unknown"']}),e.duplicateCount>0&&t.push({type:"duplicates",message:"Address ".concat(e.duplicateCount," duplicate values"),actions:["Remove exact duplicates","Normalize values (trim, lowercase)",'Consolidate variants (e.g., "USA" vs "US")']}),e.outliersCount>0&&t.push({type:"outliers",message:"Review ".concat(e.outliersCount," potential outliers"),actions:["Validate against business rules","Remove if erroneous","Keep if legitimate"]}),e.formatIssuesCount>0&&t.push({type:"format",message:"Fix ".concat(e.formatIssuesCount," format inconsistencies"),actions:["Standardize formatting","Use regex validation","Apply consistent parsing rules"]}),t}s.d(t,{V:function(){return r},y:function(){return n}})},4971:function(e,t,s){"use strict";function n(e){if(!Array.isArray(e)||0===e.length)return{columns:{},rowCount:0,columnCount:0};let t=e.length,s=Object.keys(e[0]),n=s.length,l={};return s.forEach(t=>{l[t]=function(e,t){let s=e.map(e=>e[t]),n=s.filter(e=>null!=e&&""!==e),l=s.length-n.length,c=new Set(n).size,o=function(e){if(0===e.length)return"unknown";let t=e.slice(0,Math.min(100,e.length)),s=0,n=0,l=0,c=0,o=0;t.forEach(e=>{let t=String(e).trim().toLowerCase();"true"===t||"false"===t?o++:!isNaN(parseFloat(t))&&isFinite(t)?s++:r(t)?l++:i(t)?c++:a(t)&&n++});let u=[{type:"number",count:s},{type:"boolean",count:o},{type:"email",count:l},{type:"url",count:c},{type:"date",count:n}].reduce((e,t)=>e.count>t.count?e:t);return u.count>.5*t.length?u.type:"text"}(n),u=s.length-c,d="number"===o?function(e){let t=e.map(e=>parseFloat(e)).filter(e=>!isNaN(e));if(t.length<4)return[];t.sort((e,t)=>e-t);let s=t[Math.floor(.25*t.length)],n=t[Math.floor(.75*t.length)],r=n-s,i=s-1.5*r,a=n+1.5*r;return t.filter(e=>e<i||e>a)}(n):[],m=function(e,t){let s=[];return"email"===t?s.push(...e.filter(e=>!r(String(e).trim())).slice(0,10)):"url"===t?s.push(...e.filter(e=>!i(String(e).trim())).slice(0,10)):"date"===t?s.push(...e.filter(e=>!a(String(e).trim())).slice(0,10)):"number"===t&&s.push(...e.filter(e=>isNaN(parseFloat(String(e).trim()))).slice(0,10)),s}(n,o);return{columnName:t,totalRows:s.length,missingCount:l,missingPercent:(l/s.length*100).toFixed(2),uniqueCount:c,uniquePercent:(c/s.length*100).toFixed(2),dataType:o,duplicateCount:u,duplicatePercent:(u/s.length*100).toFixed(2),outliersCount:d.length,outliersPercent:(d.length/n.length*100).toFixed(2),outlierValues:d.slice(0,5),formatIssuesCount:m.length,formatIssuesPercent:(m.length/n.length*100).toFixed(2),examples:n.slice(0,5)}}(e,t)}),{columns:l,rowCount:t,columnCount:n,timestamp:new Date().toISOString()}}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function i(e){try{return new URL(e),!0}catch(e){return!1}}function a(e){let t=new Date(e);return t instanceof Date&&!isNaN(t)}function l(e){let t={};return Object.values(e.columns).forEach(e=>{t[e.dataType]=(t[e.dataType]||0)+1}),t}function c(e){return Object.values(e.columns).map(e=>({...e,issueCount:(e.missingCount>0?1:0)+(e.duplicateCount>0?1:0)+(e.outliersCount>0?1:0)+(e.formatIssuesCount>0?1:0)})).filter(e=>e.issueCount>0).sort((e,t)=>t.issueCount-e.issueCount)}s.d(t,{Io:function(){return l},hw:function(){return n},od:function(){return c}})}},function(e){e.O(0,[674,672,971,117,744],function(){return e(e.s=7655)}),_N_E=e.O()}]);